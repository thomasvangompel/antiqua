{% extends "base.html" %}
{% block content %}
<h2>Overzicht afspraken</h2>
<table class="table table-bordered">
  <thead>
    <tr>
      <th>Datum</th>
      <th>Tijd</th>
      <th>Boek</th>
      <th>Koper</th>
      <th>Gereserveerd op</th>
    </tr>
  </thead>
  <tbody>
        {% for slot in slots %}
        <tr>
          <td>{{ '%02d'|format(slot.day) }}-{{ '%02d'|format(slot.month) }}-{{ slot.year }}</td>
          <td>{{ slot.time }}</td>
          <td>{% if slot.book %}{{ slot.book.title }}{% else %}-{% endif %}</td>
          <td>{{ slot.reserved_by.username if slot.reserved_by else '-' }}</td>
          <td>{{ slot.reserved_at.strftime('%d-%m-%Y %H:%M') if slot.reserved_at else '-' }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="container-fluid py-4">
      <div class="row">
        <!-- Aside menu -->
        <aside class="col-md-3 mb-4">
          <div class="list-group">
            <a href="#" class="list-group-item list-group-item-action">Verkocht</a>
            <a href="#" class="list-group-item list-group-item-action">Rekken toevoegen</a>
            <a href="#" class="list-group-item list-group-item-action">Bestaande rekken</a>
            <a href="#" class="list-group-item list-group-item-action">Beschikbaarheid afspraken</a>
            <a href="{{ url_for('main.afspraken_overzicht') }}" class="list-group-item list-group-item-action active">Afspraken overzicht</a>
          </div>
        </aside>
        <!-- Content -->
        <main class="col-md-9">
          {% if pagination.pages > 1 %}
          <nav aria-label="Afspraken paginatie">
            <ul class="pagination justify-content-center mt-4">
              {% if pagination.has_prev %}
                <li class="page-item">
                  <a class="page-link" href="?page={{ pagination.prev_num }}" aria-label="Vorige">
                    <span aria-hidden="true">&laquo;</span>
                  </a>
                </li>
              {% else %}
                <li class="page-item disabled">
                  <span class="page-link">&laquo;</span>
                </li>
              {% endif %}
              {% for p in range(1, pagination.pages + 1) %}
                <li class="page-item {% if p == pagination.page %}active{% endif %}">
                  <a class="page-link" href="?page={{ p }}">{{ p }}</a>
                </li>
              {% endfor %}
              {% if pagination.has_next %}
                <li class="page-item">
                  <a class="page-link" href="?page={{ pagination.next_num }}" aria-label="Volgende">
                    <span aria-hidden="true">&raquo;</span>
                  </a>
                </li>
              {% else %}
                <li class="page-item disabled">
                  <span class="page-link">&raquo;</span>
                </li>
              {% endif %}
            </ul>
          </nav>
          {% endif %}
        </main>
      </div>
    </div>

{% if pagination.pages > 1 %}
<nav aria-label="Afspraken paginatie">
  <ul class="pagination justify-content-center mt-4">
    {% if pagination.has_prev %}
      <li class="page-item">
        <a class="page-link" href="?page={{ pagination.prev_num }}" aria-label="Vorige">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
    {% else %}
      <li class="page-item disabled">
        <span class="page-link">&laquo;</span>
      </li>
    {% endif %}
    {% for p in range(1, pagination.pages + 1) %}
      <li class="page-item {% if p == pagination.page %}active{% endif %}">
        <a class="page-link" href="?page={{ p }}">{{ p }}</a>
      </li>
    {% endfor %}
    {% if pagination.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ pagination.next_num }}" aria-label="Volgende">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
    {% else %}
      <li class="page-item disabled">
        <span class="page-link">&raquo;</span>
      </li>
    {% endif %}
  </ul>
</nav>
{% endif %}
{% endblock %}
